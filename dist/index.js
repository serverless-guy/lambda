"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var __assign=function(){return(__assign=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var s in r=arguments[n])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)};function chain(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Promise.all(e).then(getLastPerformedFunction)}function getLastPerformedFunction(e){return e[e.length-1]}function resolver(n,t,s,o){return new Promise(function(e,r){return o?chain(o(n,t),handleLambdaHandler(n,s,responser)).then(e).catch(r):e(handleLambdaHandler(n,s,responser))})}function handleLambdaHandler(e,r,n){var t=r(e,n);return t.then?t.then(wrapResponse):wrapResponse(t)}function validLambdaResponseObject(e){var r=e.hasOwnProperty("body"),n=e.hasOwnProperty("headers"),t=e.hasOwnProperty("statusCode");return r&&n&&t}function wrapResponse(e){return validLambdaResponseObject(e)?e:{body:JSON.stringify(e),headers:{"Access-Control-Allow-Origin":"*"},statusCode:200}}function responser(e,r,n){return void 0===r&&(r=200),void 0===n&&(n={}),__assign({body:JSON.stringify(e),headers:{"Access-Control-Allow-Origin":"*"},statusCode:r||200},n)}function lambdaWrap(t,s,o){return function(r,e){var n=resolver(r,e,t,s);return o&&(n=n.catch(function(e){return o(r,e)})),n}}exports.lambdaWrap=lambdaWrap,exports.responser=responser,exports.resolver=resolver;
